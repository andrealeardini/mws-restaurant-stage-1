"use strict";!function(){function e(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function t(t,n,r){var i,a=new Promise(function(a,o){e(i=t[n].apply(t,r)).then(a,o)});return a.request=i,a}function n(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function r(e,n,r,i){i.forEach(function(i){i in r.prototype&&(e.prototype[i]=function(){return t(this[n],i,arguments)})})}function i(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function a(e,n,r,i){i.forEach(function(i){i in r.prototype&&(e.prototype[i]=function(){return e=this[n],(r=t(e,i,arguments)).then(function(e){if(e)return new s(e,r.request)});var e,r})})}function o(e){this._index=e}function s(e,t){this._cursor=e,this._request=t}function u(e){this._store=e}function c(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function l(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new c(n)}function d(e){this._db=e}n(o,"_index",["name","keyPath","multiEntry","unique"]),r(o,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),a(o,"_index",IDBIndex,["openCursor","openKeyCursor"]),n(s,"_cursor",["direction","key","primaryKey","value"]),r(s,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(s.prototype[t]=function(){var n=this,r=arguments;return Promise.resolve().then(function(){return n._cursor[t].apply(n._cursor,r),e(n._request).then(function(e){if(e)return new s(e,n._request)})})})}),u.prototype.createIndex=function(){return new o(this._store.createIndex.apply(this._store,arguments))},u.prototype.index=function(){return new o(this._store.index.apply(this._store,arguments))},n(u,"_store",["name","keyPath","indexNames","autoIncrement"]),r(u,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),a(u,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),i(u,"_store",IDBObjectStore,["deleteIndex"]),c.prototype.objectStore=function(){return new u(this._tx.objectStore.apply(this._tx,arguments))},n(c,"_tx",["objectStoreNames","mode"]),i(c,"_tx",IDBTransaction,["abort"]),l.prototype.createObjectStore=function(){return new u(this._db.createObjectStore.apply(this._db,arguments))},n(l,"_db",["name","version","objectStoreNames"]),i(l,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new c(this._db.transaction.apply(this._db,arguments))},n(d,"_db",["name","version","objectStoreNames"]),i(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[u,o].forEach(function(t){t.prototype[e.replace("open","iterate")]=function(){var t,n=(t=arguments,Array.prototype.slice.call(t)),r=n[n.length-1],i=this._store||this._index,a=i[e].apply(i,n.slice(0,-1));a.onsuccess=function(){r(a.result)}}})}),[o,u].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})});var f={open:function(e,n,r){var i=t(indexedDB,"open",[e,n]),a=i.request;return a.onupgradeneeded=function(e){r&&r(new l(a.result,e.oldVersion,a.transaction))},i.then(function(e){return new d(e)})},delete:function(e){return t(indexedDB,"deleteDatabase",[e])}};"undefined"!=typeof module?(module.exports=f,module.exports.default=module.exports):self.idb=f}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var restaurant,reviews,map,DBHelper=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"dbPromise",set:function(e){this._dbPromise=e},get:function(){return this._dbPromise}},{key:"dbOpened",set:function(e){this._dbOpened=e},get:function(){return this._dbOpened}}],[{key:"fetchRestaurants",value:function(t){e.openDB().then(function(n){n?(e.dbPromise=n,e.getRestaurantsFromDB().then(function(n){n.length?t(null,n):e.fetchRestaurantsFromNetwork(t)})):e.fetchRestaurantsFromNetwork(t)}).then(function(){}).catch(function(){e.fetchRestaurantsFromNetwork(t)})}},{key:"fetchRestaurantsFromNetwork",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new XMLHttpRequest;r.open("GET",e.DATABASE_URL),r.onload=function(){if(200===r.status){var i=JSON.parse(r.responseText);t(null,i),n&&e.saveRestaurantsToDB(i)}else{var a="Request failed. Returned status of "+r.status;t(a,null)}},r.send()}},{key:"fetchRestaurantById",value:function(t,n){e.fetchRestaurants(function(e,r){if(e)n(e,null);else{var i=r.find(function(e){return e.id==t});i?n(null,i):n("Restaurant does not exist",null)}})}},{key:"fetchRestaurantByCuisine",value:function(t,n){e.fetchRestaurants(function(e,r){if(e)n(e,null);else{var i=r.filter(function(e){return e.cuisine_type==t});n(null,i)}})}},{key:"fetchRestaurantByNeighborhood",value:function(t,n){e.fetchRestaurants(function(e,r){if(e)n(e,null);else{var i=r.filter(function(e){return e.neighborhood==t});n(null,i)}})}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(t,n,r){e.fetchRestaurants(function(e,i){if(e)r(e,null);else{var a=i;"all"!=t&&(a=a.filter(function(e){return e.cuisine_type==t})),"all"!=n&&(a=a.filter(function(e){return e.neighborhood==n})),r(null,a)}})}},{key:"fetchNeighborhoods",value:function(t){e.fetchRestaurants(function(e,n){if(e)t(e,null);else{var r=n.map(function(e,t){return n[t].neighborhood}),i=r.filter(function(e,t){return r.indexOf(e)==t});t(null,i)}})}},{key:"fetchCuisines",value:function(t){e.fetchRestaurants(function(e,n){if(e)t(e,null);else{var r=n.map(function(e,t){return n[t].cuisine_type}),i=r.filter(function(e,t){return r.indexOf(e)==t});t(null,i)}})}},{key:"urlForRestaurant",value:function(e){return"./restaurant.html?id="+e.id}},{key:"imageUrlForRestaurant",value:function(e){return"/img/"+e.id}},{key:"imageDescriptionForRestaurant",value:function(e){return["Inside view of the Mission Chinese Food restaurant. Many people talk to each other","A pizza cut into six slices","Inside view of Kang Ho Dong Baekjeong restaurant. You can see various modern style tables and chairs","Panoramic photo of the entrance. You can see the two streets on which the restaurant overlooks","Inside view of the Roberto's Pizza. In the background, see the kitchen and some pizza makers","Inside view of the Hometown BBQ restaurant. On the wall a huge US flag","Two people walking around the restaurand. You can see some customers inside","Detail of the The Dutch banner","Inside view of the Mu Ramen restaurant. Some customers eat using the typical oriental chopsticks","Inside view of restaurant. You see the counter with the window and several bottles."][e.id-1]}},{key:"mapMarkerForRestaurant",value:function(t,n){return new google.maps.Marker({position:t.latlng,title:t.name,url:e.urlForRestaurant(t),map:n,animation:google.maps.Animation.DROP})}},{key:"openDB",value:function(){return e.dbOpened=!0,"indexedDB"in window?idb.open("restaurants-reviews",4,function(e){switch(e.oldVersion){case 0:e.createObjectStore("restaurants",{keyPath:"id"});case 1:e.createObjectStore("reviews",{keyPath:"id"}),e.transaction.objectStore("reviews").createIndex("restaurant","restaurant_id");case 2:e.createObjectStore("offline-reviews",{keyPath:"id",autoIncrement:!0});case 3:e.createObjectStore("offline-favorites",{keyPath:"id",autoIncrement:!0})}}):Promise.resolve()}},{key:"deleteRestaurantsFromDB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.db;if(t){var n=t.transaction("restaurants","readwrite");return n.objectStore("restaurants").clear(),n.complete}}},{key:"addRestaurantToDB",value:function(e,t){if(e){var n=e.transaction("restaurants","readwrite");return n.objectStore("restaurants").put(t),n.complete}}},{key:"getRestaurantsFromDB",value:function(){if(e.dbPromise)return e.dbPromise.transaction("restaurants","readonly").objectStore("restaurants").getAll()}},{key:"saveRestaurantsToDB",value:function(t){if(e.dbOpened){if(1==navigator.onLine){e.deleteRestaurantsFromDB();var n=e.dbPromise.transaction("restaurants","readwrite"),r=n.objectStore("restaurants");return t.forEach(function(e){r.put(e)}),n.complete}return!1}}},{key:"updateRestaurantLocalDB",value:function(t){if(e.dbOpened){var n=e.dbPromise.transaction("restaurants","readwrite");return n.objectStore("restaurants").put(t),n.complete}}},{key:"addReviewToOfflineDB",value:function(t){if(e.dbOpened){var n=e.dbPromise.transaction("offline-reviews","readwrite");return n.objectStore("offline-reviews").put(t),n.complete}}},{key:"getReviewsOffline",value:function(){if(e.dbPromise)return e.dbPromise.transaction("offline-reviews","readonly").objectStore("offline-reviews").getAll()}},{key:"deleteReviewFromOffline",value:function(t){return e.dbPromise.transaction("offline-reviews","readwrite").objectStore("offline-reviews").delete(t.id)}},{key:"addFavoriteToOfflineDB",value:function(t){if(e.dbOpened){var n=e.dbPromise.transaction("offline-favorites","readwrite");return n.objectStore("offline-favorites").put(t),n.complete}}},{key:"getFavoritesOffline",value:function(){if(e.dbPromise)return e.dbPromise.transaction("offline-favorites","readonly").objectStore("offline-favorites").getAll()}},{key:"deleteFavoriteFromOffline",value:function(t){return e.dbPromise.transaction("offline-favorites","readwrite").objectStore("offline-favorites").delete(t.id)}},{key:"updateFavorite",value:function(t){return fetch(e.DATABASE_URL+"/"+t.id+"/?is_favorite="+t.value,{method:"PUT"}).then(function(){e.fetchRestaurantsFromNetwork(function(e,t){},!0)}).catch(function(n){e.addFavoriteToOfflineDB(t)})}},{key:"sendOfflineFavoritesToServer",value:function(t){return e.getFavoritesOffline().then(function(t){t.forEach(function(t){return e.updateFavorite(t).then(function(){toast("Favorites offline submitted",5e3),e.deleteFavoriteFromOffline(t)}).catch(function(e){})})})}},{key:"sendOfflineReviewsToServer",value:function(){return e.getReviewsOffline().then(function(t){t.forEach(function(t){var n=new FormData;return n.append("restaurant_id",t.restaurant_id),n.append("name",t.name),n.append("rating",t.rating),n.append("comments",t.comments),fetch(e.DATABASE_REVIEWS_URL+"/",{method:"POST",body:n}).then(function(){return toast("Review offline submitted",5e3),e.deleteReviewFromOffline(t),e.fetchReviewsFromNetwork(t.restaurant_id,function(e,t){window.location.href.includes("/restaurant.html?id=")&&fillReviewsHTML(t,!1,!0)},!0)}).catch(function(e){toast("Sending review offline.... Oops! Something went wrong.",5e3)})})})}},{key:"syncFavorites",value:function(){e.sendOfflineFavoritesToServer(function(e,t){if(e)return e})}},{key:"syncReviews",value:function(t){return e.sendOfflineReviewsToServer().then(function(){return t(null)}).catch(function(e){return t(e,null)})}},{key:"syncAll",value:function(){1==navigator.onLine&&setTimeout(function(){e.syncFavorites(),e.syncReviews(function(e){if(e)return e})},2e3)}},{key:"setFavoriteStatus",value:function(e){if(e.is_favorite){var t=document.getElementById(e.id);1==e.is_favorite||"true"==e.is_favorite?t.classList.add("restaurant-name_isfavorite"):t.classList.remove("restaurant-name_isfavorite")}}},{key:"saveFavoriteToNetwork",value:function(t){return e.updateFavorite(t.id,t.is_favorite,function(e,t){})}},{key:"fetchReviews",value:function(t,n){e.openDB().then(function(r){r?(e.dbPromise=r,e.getReviewsFromDB(t).then(function(r){if(r.length)return n(null,r);e.fetchReviewsFromNetwork(t,n)})):e.fetchReviewsFromNetwork(t,n)}).then(function(){}).catch(function(){e.fetchReviewsFromNetwork(t,n)})}},{key:"fetchReviewById",value:function(t,n){e.fetchReviews(null,function(e,r){if(e)n(e,null);else{var i=r.find(function(e){return e.id==t});i?n(null,i):n("Review does not exist",null)}})}},{key:"fetchReviewsFromNetwork",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return fetch(e.DATABASE_REVIEWS_URL+"/?restaurant_id="+t,{method:"GET"}).then(function(e){return e.json()}).then(function(i){var a=i;return r?e.saveReviewsToDB(t,a).then(function(){return n(null,a)}):n(null,a)}).catch(function(e){return n(e,null)})}},{key:"saveReviewsToDB",value:function(t,n){if(e.dbOpened)return 1==navigator.onLine&&e.deleteReviewsFromDB(t).then(function(){var t=e.dbPromise.transaction("reviews","readwrite"),r=t.objectStore("reviews");return n.forEach(function(e){e.restaurant_id=parseInt(e.restaurant_id),r.put(e)}),t.complete})}},{key:"deleteReviewsFromDB",value:function(t){if(e.dbPromise)return e.getReviewsFromDB(t).then(function(t){var n=e.dbPromise.transaction("reviews","readwrite"),r=n.objectStore("reviews");return t.forEach(function(e){r.delete(e.id)}),n.complete})}},{key:"getReviewsFromDB",value:function(t){if(e.dbPromise){var n=e.dbPromise.transaction("reviews","readonly").objectStore("reviews");return t?n.index("restaurant").getAll(Number(t)):n.getAll()}}},{key:"DATABASE_URL",get:function(){return"http://localhost:1337/restaurants"}},{key:"DATABASE_REVIEWS_URL",get:function(){return"http://localhost:1337/reviews"}}]),e}();function fetchRestaurantFromURL(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(self.restaurant&&0==t)e(null,self.restaurant);else{var n=getParameterByName("id");if(n)DBHelper.fetchReviews(n,function(t,r){self.reviews=r,DBHelper.fetchRestaurantById(n,function(t,n){self.restaurant=n,n&&(fillRestaurantHTML(),e(null,n))})});else{e("No restaurant id in URL",null)}}}"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(e){},function(e){})}),window.initMap=function(){fetchRestaurantFromURL(function(e,t){e||(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,gestureHandling:"cooperative"}),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map),document.getElementById("map").classList.remove("inactive"),document.getElementById("image-blurred").hidden=!0,document.getElementById("image-blurred-text").hidden=!0)})};var fillRestaurantHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant;DBHelper.getFavoritesOffline().then(function(t){document.getElementById("restaurant-name").innerHTML=e.name;var n=document.getElementById("favorite-fab");if(t.length){var r=t.filter(function(t){return t.id==e.id});r.length&&(e.is_favorite=r[0].value)}n.id=e.id,e.is_favorite&&(1!=e.is_favorite&&"true"!=e.is_favorite||n.classList.add("app-fab--isfavorite")),n.addEventListener("click",onFavoriteClick),document.getElementById("add-fab").addEventListener("click",onCreateReview),document.getElementById("restaurant-address").innerHTML=e.address;var i=document.getElementById("restaurant-picture"),a=document.createElement("source");a.setAttribute("type","image/webp"),a.setAttribute("srcset",DBHelper.imageUrlForRestaurant(e)+".webp"),i.append(a);var o=document.createElement("img");o.id="restaurant-img",o.alt=DBHelper.imageDescriptionForRestaurant(e),o.src=DBHelper.imageUrlForRestaurant(e)+".jpg",i.append(o),document.getElementById("restaurant-cuisine").innerHTML=e.cuisine_type,e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML(),DBHelper.getReviewsOffline().then(function(t){var n=t.filter(function(t){return t.restaurant_id==e.id});n.reverse(),fillReviewsHTML(n,!0,!0)})}).catch(function(e){})},fillRestaurantHoursHTML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant.operating_hours,t=document.getElementById("restaurant-hours");for(var n in e){var r=document.createElement("tr"),i=document.createElement("td");i.innerHTML=n,i.className="restaurant-day",r.appendChild(i);var a=document.createElement("td");a.innerHTML=e[n],r.appendChild(a),t.appendChild(r)}};function fillReviewsHTML(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.reviews,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.getElementById("reviews-container");if(0==n){var i=document.createElement("h2");i.innerHTML="Reviews",r.appendChild(i)}if(!e){var a=document.createElement("p");return 1==navigator.onLine?a.innerHTML="No reviews yet!":a.innerHTML="You are offline and it seems that is the first time that you visit this restaurants. All reviews will be cached when you visit the page online",void r.appendChild(a)}var o=document.getElementById("reviews-list");0==t&&(o.innerHTML=""),e.reverse(),e.forEach(function(e){1==t?(o.insertBefore(createReviewHTML(e,t),o.firstChild),o.firstChild.focus()):o.appendChild(createReviewHTML(e,t))}),r.appendChild(o)}var createReviewHTML=function(e,t){var n=document.createElement("li"),r=document.createElement("div");r.className="reviews-header";var i=document.createElement("p");if(i.innerHTML=e.name,i.className="reviews-name",r.appendChild(i),0==t){var a=document.createElement("p"),o=new Date(e.updatedAt).toLocaleDateString();a.innerHTML=o,a.className="reviews-date",r.appendChild(a)}else{var s=document.createElement("i");s.innerText="offline_bolt",s.classList.add("material-icons"),s.classList.add("review-offline"),r.appendChild(s)}n.appendChild(r);var u=document.createElement("p");u.innerHTML="Rating: "+e.rating,u.className="reviews-rating",n.appendChild(u);var c=document.createElement("p");return c.innerHTML=e.comments,n.appendChild(c),n},fillBreadcrumb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.restaurant,t=document.getElementById("breadcrumb"),n=document.createElement("li"),r=document.createElement("a");r.href=DBHelper.urlForRestaurant(e),r.innerHTML=e.name,r.setAttribute("aria-current","page"),n.appendChild(r),t.appendChild(n)},getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null};function showMap(){var e=document.getElementById("GoogleMaps");e.src=e.dataset.src}function gm_authFailure(){}function onFavoriteClick(e){var t=e.target.parentElement,n={id:t.id,value:"false"};t.classList.contains("app-fab--isfavorite")||(n.value="true"),DBHelper.updateFavorite(n).then(function(){}),"true"==n.value?t.setAttribute("aria-label","The restaurant is marked as favorite"):t.setAttribute("aria-label","Click to mark the restaurant as favorite"),t.classList.toggle("app-fab--isfavorite")}function toast(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.getElementById("toast"),i=void 0;if(1==r.classList.contains("show")){if(e==r.innerText)return;if(0==n)return void setTimeout(function(){clearTimeout(i),toast(e,t,n)},2e3)}r.innerText=e,r.classList.add("show"),i=setTimeout(function(){r.classList.remove("show")},t)}function onCreateReview(){var e=document.getElementById("reviews-list"),t=document.createElement("li");t.classList.add("addReview");var n=document.createElement("form"),r=document.createElement("div");r.className="reviews-header";var i=document.createElement("h3");i.innerText="New review",r.appendChild(i),n.appendChild(r);var a=document.createElement("input"),o=document.getElementsByClassName("app-fab--favorite")[0];a.value=o.id,a.name="restaurant_id",a.type="hidden",n.appendChild(a);var s=document.createElement("input");s.className="reviews-name",s.placeholder="Insert your name",s.required=!0,s.name="name",n.appendChild(s);var u=document.createElement("p");u.className="reviews-rating",u.innerText="Rating: ";var c=document.createElement("select");c.classList.add("reviews-rating-score");for(var l=1;l<=5;l++){var d=document.createElement("option");d.id="score"+l,d.value=l,d.innerText=l,c.appendChild(d),c.name="rating"}u.appendChild(c),n.appendChild(u);var f=document.createElement("textarea");f.placeholder="Type your review here...",f.className="reviews-comments",f.required=!0,f.name="comments",f.addEventListener("input",function(e){f.style.height="auto",f.style.height=f.scrollHeight+"px"}),n.appendChild(f);var v=document.createElement("button");v.classList.add("mdc-fab","mdc-fab--mini","rew-fab--save");var m=document.createElement("span");m.innerText="save",m.classList.add("mdc-fab__icon","material-icons"),v.type="submit",v.appendChild(m),n.appendChild(v);var p=document.createElement("button");p.classList.add("mdc-fab","mdc-fab--mini","rew-fab--delete");var h=document.createElement("span");h.innerText="delete",h.classList.add("mdc-fab__icon","material-icons"),p.appendChild(h),n.appendChild(p),t.appendChild(n),e.insertBefore(t,e.firstChild),p.focus(),s.focus();var w=document.getElementById("add-fab");function g(){w.classList.remove("app-fab--hide"),o.classList.remove("app-fab--hide"),t.remove()}w.classList.add("app-fab--hide"),o.classList.add("app-fab--hide"),p.addEventListener("click",function(e){if(e.preventDefault(),""!=s.value|""!=f.value){var t=document.getElementById("delConfirm"),n=document.getElementById("delConfirm-cancel"),r=document.getElementById("delConfirm-confirm");t.showModal(),n.addEventListener("click",function(){t.close()}),r.addEventListener("click",function(){t.close(),g()})}else g()}),n.addEventListener("submit",function(e){e.preventDefault(),function(){var e=new FormData(n);if(navigator.onLine){var t=new XMLHttpRequest;t.addEventListener("load",function(e){toast("The review is submitted",5e3),g(),DBHelper.fetchReviewsFromNetwork(getParameterByName("id"),function(e,t){fillReviewsHTML(t,!1,!0)},!0)}),t.addEventListener("error",function(e){toast("Oops! Something went wrong.",5e3)}),t.open("POST",DBHelper.DATABASE_REVIEWS_URL+"/"),t.send(e)}else{var r={restaurant_id:e.get("restaurant_id"),name:e.get("name"),rating:e.get("rating"),comments:e.get("comments")};DBHelper.addReviewToOfflineDB(r).then(function(){toast("The review is saved. Will be submitted when you return online",7e3),g();var e=[r];fillReviewsHTML(e,!0,!0)})}}()})}window.googleMapsError=function(){},window.addEventListener("load",function(e){DBHelper.syncAll(),fetchRestaurantFromURL(function(e,t){e||(fillBreadcrumb(),document.getElementById("map-container").addEventListener("click",showMap))})}),window.addEventListener("online",function(e){document.getElementById("offline").classList.remove("show"),toast("You are online.\nAll changes will be synchronized.",5e3,!0),DBHelper.syncAll()}),window.addEventListener("offline",function(e){document.getElementById("offline").classList.add("show"),toast("You are offline.\nAll changes will be synchronized when you return online.",5e3,!0)}),window.addEventListener("DOMContentLoaded",function(e){navigator.onLine||document.getElementById("offline").classList.add("show")});
//# sourceMappingURL=restaurant_all.js.map
